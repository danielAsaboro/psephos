/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  isProgramError,
  type Address,
  type SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM,
  type SolanaError,
} from "@solana/kit";
import { PSEPHOS_PROGRAM_ADDRESS } from "../programs";

/** TitleTooLong: Proposal title is too long */
export const PSEPHOS_ERROR__TITLE_TOO_LONG = 0x1770; // 6000
/** TooFewOptions: Too few voting options (minimum 2) */
export const PSEPHOS_ERROR__TOO_FEW_OPTIONS = 0x1771; // 6001
/** TooManyOptions: Too many voting options (maximum 10) */
export const PSEPHOS_ERROR__TOO_MANY_OPTIONS = 0x1772; // 6002
/** OptionTooLong: Voting option text is too long */
export const PSEPHOS_ERROR__OPTION_TOO_LONG = 0x1773; // 6003
/** VotingNotStarted: Voting has not started yet */
export const PSEPHOS_ERROR__VOTING_NOT_STARTED = 0x1774; // 6004
/** VotingEnded: Voting period has ended */
export const PSEPHOS_ERROR__VOTING_ENDED = 0x1775; // 6005
/** VotingNotEnded: Voting period has not ended yet */
export const PSEPHOS_ERROR__VOTING_NOT_ENDED = 0x1776; // 6006
/** ProposalFinalized: Proposal has already been finalized */
export const PSEPHOS_ERROR__PROPOSAL_FINALIZED = 0x1777; // 6007
/** InvalidProof: Invalid ZK proof - size or format incorrect */
export const PSEPHOS_ERROR__INVALID_PROOF = 0x1778; // 6008
/** InvalidVoteChoice: Invalid vote choice */
export const PSEPHOS_ERROR__INVALID_VOTE_CHOICE = 0x1779; // 6009
/** AlreadyRevealed: Vote has already been revealed */
export const PSEPHOS_ERROR__ALREADY_REVEALED = 0x177a; // 6010
/** Unauthorized: Unauthorized to perform this action */
export const PSEPHOS_ERROR__UNAUTHORIZED = 0x177b; // 6011
/** InvalidReveal: Invalid reveal - voter secret does not match nullifier */
export const PSEPHOS_ERROR__INVALID_REVEAL = 0x177c; // 6012
/** InvalidPublicWitness: Invalid public witness - size or format incorrect */
export const PSEPHOS_ERROR__INVALID_PUBLIC_WITNESS = 0x177d; // 6013
/** ThresholdMismatch: Public input threshold does not match proposal threshold */
export const PSEPHOS_ERROR__THRESHOLD_MISMATCH = 0x177e; // 6014
/** ProposalIdMismatch: Public input proposal ID does not match */
export const PSEPHOS_ERROR__PROPOSAL_ID_MISMATCH = 0x177f; // 6015
/** CommitmentMismatch: Public input commitment does not match submitted commitment */
export const PSEPHOS_ERROR__COMMITMENT_MISMATCH = 0x1780; // 6016
/** NullifierMismatch: Public input nullifier does not match submitted nullifier */
export const PSEPHOS_ERROR__NULLIFIER_MISMATCH = 0x1781; // 6017
/** InsufficientTokens: Insufficient token balance to vote */
export const PSEPHOS_ERROR__INSUFFICIENT_TOKENS = 0x1782; // 6018
/** InvalidTokenMint: Token account mint does not match proposal token mint */
export const PSEPHOS_ERROR__INVALID_TOKEN_MINT = 0x1783; // 6019
/** InvalidTokenOwner: Token account owner does not match voter */
export const PSEPHOS_ERROR__INVALID_TOKEN_OWNER = 0x1784; // 6020

export type PsephosError =
  | typeof PSEPHOS_ERROR__ALREADY_REVEALED
  | typeof PSEPHOS_ERROR__COMMITMENT_MISMATCH
  | typeof PSEPHOS_ERROR__INSUFFICIENT_TOKENS
  | typeof PSEPHOS_ERROR__INVALID_PROOF
  | typeof PSEPHOS_ERROR__INVALID_PUBLIC_WITNESS
  | typeof PSEPHOS_ERROR__INVALID_REVEAL
  | typeof PSEPHOS_ERROR__INVALID_TOKEN_MINT
  | typeof PSEPHOS_ERROR__INVALID_TOKEN_OWNER
  | typeof PSEPHOS_ERROR__INVALID_VOTE_CHOICE
  | typeof PSEPHOS_ERROR__NULLIFIER_MISMATCH
  | typeof PSEPHOS_ERROR__OPTION_TOO_LONG
  | typeof PSEPHOS_ERROR__PROPOSAL_FINALIZED
  | typeof PSEPHOS_ERROR__PROPOSAL_ID_MISMATCH
  | typeof PSEPHOS_ERROR__THRESHOLD_MISMATCH
  | typeof PSEPHOS_ERROR__TITLE_TOO_LONG
  | typeof PSEPHOS_ERROR__TOO_FEW_OPTIONS
  | typeof PSEPHOS_ERROR__TOO_MANY_OPTIONS
  | typeof PSEPHOS_ERROR__UNAUTHORIZED
  | typeof PSEPHOS_ERROR__VOTING_ENDED
  | typeof PSEPHOS_ERROR__VOTING_NOT_ENDED
  | typeof PSEPHOS_ERROR__VOTING_NOT_STARTED;

let psephosErrorMessages: Record<PsephosError, string> | undefined;
if (process.env.NODE_ENV !== "production") {
  psephosErrorMessages = {
    [PSEPHOS_ERROR__ALREADY_REVEALED]: `Vote has already been revealed`,
    [PSEPHOS_ERROR__COMMITMENT_MISMATCH]: `Public input commitment does not match submitted commitment`,
    [PSEPHOS_ERROR__INSUFFICIENT_TOKENS]: `Insufficient token balance to vote`,
    [PSEPHOS_ERROR__INVALID_PROOF]: `Invalid ZK proof - size or format incorrect`,
    [PSEPHOS_ERROR__INVALID_PUBLIC_WITNESS]: `Invalid public witness - size or format incorrect`,
    [PSEPHOS_ERROR__INVALID_REVEAL]: `Invalid reveal - voter secret does not match nullifier`,
    [PSEPHOS_ERROR__INVALID_TOKEN_MINT]: `Token account mint does not match proposal token mint`,
    [PSEPHOS_ERROR__INVALID_TOKEN_OWNER]: `Token account owner does not match voter`,
    [PSEPHOS_ERROR__INVALID_VOTE_CHOICE]: `Invalid vote choice`,
    [PSEPHOS_ERROR__NULLIFIER_MISMATCH]: `Public input nullifier does not match submitted nullifier`,
    [PSEPHOS_ERROR__OPTION_TOO_LONG]: `Voting option text is too long`,
    [PSEPHOS_ERROR__PROPOSAL_FINALIZED]: `Proposal has already been finalized`,
    [PSEPHOS_ERROR__PROPOSAL_ID_MISMATCH]: `Public input proposal ID does not match`,
    [PSEPHOS_ERROR__THRESHOLD_MISMATCH]: `Public input threshold does not match proposal threshold`,
    [PSEPHOS_ERROR__TITLE_TOO_LONG]: `Proposal title is too long`,
    [PSEPHOS_ERROR__TOO_FEW_OPTIONS]: `Too few voting options (minimum 2)`,
    [PSEPHOS_ERROR__TOO_MANY_OPTIONS]: `Too many voting options (maximum 10)`,
    [PSEPHOS_ERROR__UNAUTHORIZED]: `Unauthorized to perform this action`,
    [PSEPHOS_ERROR__VOTING_ENDED]: `Voting period has ended`,
    [PSEPHOS_ERROR__VOTING_NOT_ENDED]: `Voting period has not ended yet`,
    [PSEPHOS_ERROR__VOTING_NOT_STARTED]: `Voting has not started yet`,
  };
}

export function getPsephosErrorMessage(code: PsephosError): string {
  if (process.env.NODE_ENV !== "production") {
    return (psephosErrorMessages as Record<PsephosError, string>)[code];
  }

  return "Error message not available in production bundles.";
}

export function isPsephosError<TProgramErrorCode extends PsephosError>(
  error: unknown,
  transactionMessage: {
    instructions: Record<number, { programAddress: Address }>;
  },
  code?: TProgramErrorCode,
): error is SolanaError<typeof SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM> &
  Readonly<{ context: Readonly<{ code: TProgramErrorCode }> }> {
  return isProgramError<TProgramErrorCode>(
    error,
    transactionMessage,
    PSEPHOS_PROGRAM_ADDRESS,
    code,
  );
}
